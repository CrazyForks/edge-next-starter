name = "cloudflare-worker-template-test"
compatibility_date = "2026-02-12"
compatibility_flags = ["nodejs_compat"]
main = "dist/server/index.js"
no_bundle = true

# Treat JS files as ES modules (vinext build output is pre-bundled)
[[rules]]
type = "ESModule"
globs = ["**/*.js", "**/*.mjs"]

# Static assets (vinext build output)
[assets]
not_found_handling = "none"
directory = "dist/client"

# D1 database binding
[[d1_databases]]
binding = "DB"
database_name = "cloudflare-worker-template-test"
database_id = "f2aae4f2-b6c6-434c-88a1-fe7667958bb7"
migrations_dir = "migrations"

# R2 bucket binding
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "cloudflare-worker-template-test"

# KV namespace
[[kv_namespaces]]
binding = "KV"
id = "d45eef82c64443939acaa1dc2b45aa95"

# Environment variables
[vars]
ENVIRONMENT = "test"
ANALYTICS_SINK = "kv"
# Configure NEXTAUTH_SECRET via `wrangler secret put NEXTAUTH_SECRET` to keep secrets out of source control
# Configure STRIPE_SECRET_KEY via `wrangler secret put STRIPE_SECRET_KEY`
# Configure STRIPE_WEBHOOK_SECRET via `wrangler secret put STRIPE_WEBHOOK_SECRET`
